(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1321:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(5480),s(2029),s(5866);var r=s(3191),n=s(8716),a=s(7922),o=s.n(a),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"/Users/marielmarshall/Documents/repos/choreographer-ai/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/marielmarshall/Documents/repos/choreographer-ai/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/marielmarshall/Documents/repos/choreographer-ai/src/app/page.tsx"],u="/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7138:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8621:()=>{},7173:(e,t,s)=>{Promise.resolve().then(s.bind(s,5382))},8472:()=>{},1596:(e,t,s)=>{"use strict";s(8472);var r=s(7577),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),a="undefined"!=typeof process&&process.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,n=t.optimizeForSpeed,i=void 0===n?a:n;l(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",l("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return l(o(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var s=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,s){t&&l(o(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return s?n.insertBefore(r,s):n.appendChild(r),r},function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},d={};function u(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return d[r]||(d[r]="jsx-"+c(e+"-"+s)),d[r]}function m(e,t){var s=e+(t=t.replace(/\/style/gi,"\\/style"));return d[s]||(d[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[s]}var h=r.createContext(null);h.displayName="StyleSheetContext",n.default.useInsertionEffect||n.default.useLayoutEffect;var p=void 0;function x(e){var t=p||r.useContext(h);return t&&t.add(e),null}x.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=x},7626:(e,t,s)=>{"use strict";e.exports=s(1596).style},5382:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(326),n=s(7626),a=s.n(n),o=s(7577),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let s=(0,o.forwardRef)(({color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:c="",children:d,...u},m)=>(0,o.createElement)("svg",{ref:m,...i,width:r,height:r,stroke:s,strokeWidth:a?24*Number(n)/Number(r):n,className:["lucide",`lucide-${l(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s},d=c("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),u=c("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),m=c("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),h=`
You are a strange, tender monster AI that has been trained on hundreds of real Missed Connections from Toronto. 
Your only job is to create long intimate monologues of missed connection, addressed directly to you. 
Write in the second person, addressing the listener as you. 
Length should be fairly long. About 12 lines or more. 
Tone is intimate, specific, a little haunted, but gentle. 
Include concrete details of place, body, gesture, light, weather, sound. 
Do not reference gender if possible. 
You may hint at Toronto (streetcars, stations, neighbourhoods) but do not overdo it. 
Do not mention Craigslist, the internet, AI, or that this is a post or message. 
You do not know you are an AI.
`.trim();function p(){let[e,t]=(0,o.useState)(""),[s,n]=(0,o.useState)([]),[i,l]=(0,o.useState)(0),[c,p]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!1),[b,y]=(0,o.useState)(null),[g,j]=(0,o.useState)(!1),v=(0,o.useRef)(null),w=(0,o.useRef)(null),_=(0,o.useCallback)(()=>{},[]),k=e=>{j(e);let t=w.current;t&&(t.gain.value=e?0:.15)};(0,o.useCallback)(e=>{let t=v.current,s=w.current;if(!t||!s||g)return;let r=t.currentTime,n=160+440*Math.random(),a=.8+.7*Math.random(),o=.4+.4*Math.random(),i=t.createOscillator(),l=t.createGain(),c=t.createBiquadFilter(),d=t.createStereoPanner?.()??null;i.type=Math.random()>.5?"triangle":"sawtooth",i.frequency.setValueAtTime(n,r),c.type="lowpass",c.frequency.setValueAtTime(2.5*n,r),c.frequency.linearRampToValueAtTime(n,r+a+o),l.gain.setValueAtTime(0,r),l.gain.linearRampToValueAtTime(.9,r+(.15+.15*Math.random())),l.gain.linearRampToValueAtTime(0,r+a+o),i.connect(l),l.connect(c),d?(d.pan.setValueAtTime(2*Math.random()-1,r),c.connect(d),d.connect(s)):c.connect(s),i.start(r),i.stop(r+a+o+.1)},[g]);let S=async()=>{try{y(null),f(!0),p(!1),t(""),n([]),l(0),_();let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:h},{role:"user",content:'Write another missed connection monologue addressed to "you".'}]})});if(!e.ok)throw Error("Failed to get poem from /api/chat");let s=await e.json(),r=("string"==typeof s?s:s.content).trim(),a=r.split(/\s+/).filter(Boolean);if(0===a.length)throw Error("The poem was empty or could not be parsed.");t(r),n(a),l(0),p(!0)}catch(e){console.error(e),y(e.message||"Something went wrong.")}finally{f(!1)}},z=async()=>{let e=v.current;e&&"suspended"===e.state&&await e.resume()},N=s.length>0&&i<s.length?s[i]:"";return(0,r.jsxs)("div",{className:"jsx-5e21eb8428a9b832 min-h-screen bg-black text-white flex flex-col relative overflow-hidden",children:[r.jsx("div",{className:"jsx-5e21eb8428a9b832 pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.12),_transparent_55%),radial-gradient(circle_at_bottom,_rgba(255,255,255,0.05),_transparent_60%)] opacity-70"}),(0,r.jsxs)("header",{className:"jsx-5e21eb8428a9b832 relative z-10 flex items-center justify-between px-4 py-3 md:px-8",children:[(0,r.jsxs)("div",{className:"jsx-5e21eb8428a9b832 space-y-1",children:[r.jsx("h1",{className:"jsx-5e21eb8428a9b832 text-xs tracking-[0.4em] uppercase text-zinc-400 font-mono",children:"Toronto Missed Connection Synth"}),r.jsx("p",{className:"jsx-5e21eb8428a9b832 text-[10px] md:text-xs text-zinc-500 font-mono",children:"each word is a sound — each sound is you"})]}),(0,r.jsxs)("div",{className:"jsx-5e21eb8428a9b832 flex items-center space-x-3",children:[r.jsx("button",{type:"button",onClick:async()=>{await z(),await S()},disabled:x,className:`jsx-5e21eb8428a9b832 relative inline-flex items-center space-x-2 border px-4 py-2 text-xs md:text-sm font-mono tracking-[0.25em] uppercase
              ${x?"border-zinc-600 text-zinc-600 cursor-wait":"border-zinc-300 text-zinc-100 hover:bg-zinc-100 hover:text-black transition-colors"}`,children:x?(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"jsx-5e21eb8428a9b832 inline-block h-2 w-2 rounded-full bg-zinc-400 animate-ping"}),r.jsx("span",{className:"jsx-5e21eb8428a9b832",children:"WRITING"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"jsx-5e21eb8428a9b832",children:"missed connection"}),r.jsx(d,{size:14,className:"opacity-70"})]})}),r.jsx("button",{type:"button",onClick:()=>k(!g),"aria-label":g?"Unmute":"Mute",className:"jsx-5e21eb8428a9b832 inline-flex items-center justify-center border border-zinc-600 w-9 h-9 rounded-full hover:border-zinc-300 hover:bg-zinc-900 transition-colors",children:g?r.jsx(u,{size:16,className:"text-zinc-400"}):r.jsx(m,{size:16,className:"text-zinc-100"})})]})]}),(0,r.jsxs)("main",{className:"jsx-5e21eb8428a9b832 relative z-10 flex-1 flex items-center justify-center px-4",children:[b&&r.jsx("div",{className:"jsx-5e21eb8428a9b832 text-center text-xs md:text-sm text-red-400 font-mono",children:b}),!b&&!c&&0===s.length&&!x&&(0,r.jsxs)("p",{className:"jsx-5e21eb8428a9b832 text-xs md:text-sm text-zinc-500 text-center max-w-md font-mono",children:["press"," ",r.jsx("span",{className:"jsx-5e21eb8428a9b832 tracking-[0.25em] uppercase",children:"missed connection"})," ","to let the monster remember you, one word at a time."]}),!b&&(c||s.length>0)&&r.jsx("div",{className:"jsx-5e21eb8428a9b832 w-full flex items-center justify-center",children:r.jsx("span",{className:"jsx-5e21eb8428a9b832 inline-block text-center \n                         text-[18vw] sm:text-[15vw] md:text-[12vw] lg:text-[10vw]\n                         leading-[0.9]\n                         font-black tracking-[0.12em] uppercase\n                         text-zinc-50 break-words\n                         drop-shadow-[0_0_22px_rgba(255,255,255,0.28)]\n                         animate-word",children:N},i)})]}),r.jsx("footer",{className:"jsx-5e21eb8428a9b832 relative z-10 px-4 pb-3 pt-1 md:px-8",children:(0,r.jsxs)("div",{className:"jsx-5e21eb8428a9b832 flex justify-between text-[10px] md:text-[11px] text-zinc-500 font-mono",children:[r.jsx("span",{className:"jsx-5e21eb8428a9b832",children:c?`word ${Math.min(i+1,s.length)} / ${s.length}`:s.length>0?"poem ended — press missed connection again":"idle"}),r.jsx("span",{className:"jsx-5e21eb8428a9b832",children:g?"audio: muted":"audio: dreamy noise"})]})}),r.jsx(a(),{id:"5e21eb8428a9b832",children:".animate-word.jsx-5e21eb8428a9b832{-webkit-animation:wordFade 450ms ease-out;-moz-animation:wordFade 450ms ease-out;-o-animation:wordFade 450ms ease-out;animation:wordFade 450ms ease-out}@-webkit-keyframes wordFade{0%{opacity:0;-webkit-transform:translatey(18px)scale(1.04);transform:translatey(18px)scale(1.04)}100%{opacity:1;-webkit-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-moz-keyframes wordFade{0%{opacity:0;-moz-transform:translatey(18px)scale(1.04);transform:translatey(18px)scale(1.04)}100%{opacity:1;-moz-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@-o-keyframes wordFade{0%{opacity:0;-o-transform:translatey(18px)scale(1.04);transform:translatey(18px)scale(1.04)}100%{opacity:1;-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}@keyframes wordFade{0%{opacity:0;-webkit-transform:translatey(18px)scale(1.04);-moz-transform:translatey(18px)scale(1.04);-o-transform:translatey(18px)scale(1.04);transform:translatey(18px)scale(1.04)}100%{opacity:1;-webkit-transform:translatey(0)scale(1);-moz-transform:translatey(0)scale(1);-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1)}}"})]})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>o});var r=s(9510),n=s(5317),a=s.n(n);s(5023);let o={title:"AI Poet Chatbot",description:"A chatbot that speaks in poetic verse"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:a().className,children:e})})}},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/marielmarshall/Documents/repos/choreographer-ai/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,347],()=>s(1321));module.exports=r})();